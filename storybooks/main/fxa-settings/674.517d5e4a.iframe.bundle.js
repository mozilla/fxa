"use strict";(self.webpackChunkfxa_settings=self.webpackChunkfxa_settings||[]).push([[674],{"./src/components/LegalWithMarkdown/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>components_LegalWithMarkdown});var react=__webpack_require__("../../node_modules/react/index.js"),AppLayout=__webpack_require__("./src/components/AppLayout/index.tsx"),es=__webpack_require__("../../node_modules/@reach/router/es/index.js"),utils=__webpack_require__("../fxa-react/lib/utils.tsx"),metrics=__webpack_require__("./src/lib/metrics.ts"),CardHeader=__webpack_require__("./src/components/CardHeader/index.tsx"),objectWithoutProperties=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),LinkExternal=__webpack_require__("../fxa-react/components/LinkExternal/index.tsx"),react_markdown=__webpack_require__("../../node_modules/react-markdown/lib/react-markdown.js"),rehype_raw=__webpack_require__("../../node_modules/rehype-raw/index.js");const _excluded=["node"],_excluded2=["node"],_excluded3=["node"],_excluded4=["node"],_excluded5=["node"],_excluded6=["node"],_excluded7=["node"],_excluded8=["node"],_excluded9=["node","children"],components_MarkdownLegal=_ref=>{let{markdown}=_ref;return react.createElement(react_markdown.$,{children:markdown,rehypePlugins:[rehype_raw.A],components:{h1:_ref2=>{let{node}=_ref2,props=(0,objectWithoutProperties.A)(_ref2,_excluded);return react.createElement("h1",Object.assign({className:"".concat("font-header font-bold"," text-xl mb-4")},props))},h2:_ref3=>{let{node}=_ref3,props=(0,objectWithoutProperties.A)(_ref3,_excluded2);return react.createElement("h2",Object.assign({className:"".concat("font-header font-bold"," text-lg my-5")},props))},h3:_ref4=>{let{node}=_ref4,props=(0,objectWithoutProperties.A)(_ref4,_excluded3);return react.createElement("h3",Object.assign({className:"".concat("font-header font-bold"," my-5")},props))},h4:_ref5=>{let{node}=_ref5,props=(0,objectWithoutProperties.A)(_ref5,_excluded4);return react.createElement("h4",Object.assign({className:"".concat("font-header font-bold"," my-3 text-sm")},props))},p:_ref6=>{let{node}=_ref6,props=(0,objectWithoutProperties.A)(_ref6,_excluded5);return react.createElement("p",Object.assign({className:"mb-5 text-sm"},props))},ol:_ref7=>{let{node}=_ref7,props=(0,objectWithoutProperties.A)(_ref7,_excluded6);return react.createElement("ol",Object.assign({className:"".concat("ltr:ml-5 rtl:mr-5 mb-5"," list-decimal")},props))},ul:_ref8=>{let{node}=_ref8,props=(0,objectWithoutProperties.A)(_ref8,_excluded7);return react.createElement("ul",Object.assign({className:"".concat("ltr:ml-5 rtl:mr-5 mb-5"," list-disc [&>ul]:list-circle")},props))},li:_ref9=>{let{node}=_ref9,props=(0,objectWithoutProperties.A)(_ref9,_excluded8);return react.createElement("li",Object.assign({className:"text-sm"},props))},a:_ref0=>{let{node,children}=_ref0,props=(0,objectWithoutProperties.A)(_ref0,_excluded9);return props.href?react.createElement(LinkExternal.A,{className:"link-blue",href:props.href,rel:props.href.includes(".mozilla.org")?"author":void 0},children):(console.error("Bad link provided from the legal-docs repo"),react.createElement(react.Fragment,null))}}})};var LoadingSpinner=__webpack_require__("../fxa-react/components/LoadingSpinner/index.tsx"),constants=__webpack_require__("./src/constants/index.tsx"),file_utils_legal=__webpack_require__("./src/lib/file-utils-legal.tsx"),models=__webpack_require__("./src/models/index.ts"),utilities=__webpack_require__("./src/lib/utilities.ts"),Banner=__webpack_require__("./src/components/Banner/index.tsx");const components_LegalWithMarkdown=_ref=>{let{locale,viewName,legalDocFile,headingTextFtlId,headingText,fetchLegalDoc}=_ref;(0,metrics.un)(viewName,constants.$e);const[markdown,setMarkdown]=(0,react.useState)(),[error,setError]=(0,react.useState)(),ftlMsgResolver=(0,models.Lh)();(0,react.useEffect)(()=>{let isMounted=!0;return(async()=>{const{markdown:fetchedMarkdown,error}=await async function fetchLegal(locale,legalDocFile){return null!=fetchLegalDoc?fetchLegalDoc(locale,legalDocFile):(0,file_utils_legal.b)(locale,legalDocFile)}(locale||navigator.language||"en",legalDocFile);isMounted&&(fetchedMarkdown&&setMarkdown(fetchedMarkdown),error&&setError(error))})(),()=>{isMounted=!1}},[locale,legalDocFile,fetchLegalDoc]);return react.createElement(AppLayout.A,{widthClass:"card-xl"},markdown?react.createElement("article",{className:"text-start"},react.createElement(components_MarkdownLegal,{markdown})):react.createElement(CardHeader.Ay,{headingTextFtlId,headingText}),!markdown&&error&&react.createElement(Banner.Ay,{type:"error",content:{localizedHeading:ftlMsgResolver.getMsg("app-general-err-message","Something went wrong. Please try again later.")}}),!markdown&&!error&&react.createElement(LoadingSpinner.Ay,{imageClassName:"w-10 h-10 animate-spin mx-auto"}),react.createElement("div",{className:"flex mt-5"},react.createElement(utils.Au,{id:"legal-back-button"},react.createElement("button",{className:"cta-primary cta-xl",onClick:()=>{(0,metrics.m4)("flow.".concat(viewName),"back",constants.$e);const params=(0,utilities.jw)(window.location.search);(0,es.oo)(params.contentRedirect?-2:-1)}},"Back"))))}}}]);