---
# Schema
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0

account:
  user_id:
    type: string
    description: |
      The firefox/mozilla account id
    lifetime: application
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
    no_lint:
      - COMMON_PREFIX

relying_party:
  service:
    type: string
    description: |
      The service name of the relying party
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - technical

  oauth_client_id:
    type: string
    description: |
      The client id of the relying party
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - fxa-staff@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7265
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - technical

session:
  flow_id:
    type: string
    description: an ID generated by FxA for its flow metrics
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

  device_type:
    type: string
    description: one of 'mobile', 'tablet', or ''
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - technical

  entrypoint:
    type: string
    description: Entrypoint to the service
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

  entrypoint_experiment:
    type: string
    description: Identifier for the experiment the user is part of at the entrypoint
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

  entrypoint_variation:
    type: string
    description: Identifier for the experiment variation the user is part of at the entrypoint
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

subscription:
  checkout_type:
    type: string
    description: |
      Whether the checkout flow is for new users or existing users.
      One of “with-account” or “without-account"
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  payment_provider:
    type: string
    description: The third party service ultimately processing a user’s payments (e.g. 'stripe')
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  product_id:
    type: string
    description: Product ID of a subscription.
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  plan_id:
    type: string
    description: Plan ID of a subscription.
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  offering_id:
    type: string
    description: ID of the offering a customer subscribed to
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  interval:
    type: string
    description: Interval of a subscription used at checkout
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  currency:
    type: string
    description: Currency of a subscription used at checkout
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  promotion_code:
    type: string
    description: The Stripe customer-facing promotion code applied, if any
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  subscribed_plan_ids:
    type: string
    description: Comma-separated list of Stripe price/plan IDs the user is already subscribed to
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  error_id:
    type: string
    description: The error id, if any, encountered for a fxa_pay_setup - fail event
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

utm:
  campaign:
    description: |
      A marketing campaign.  For example, if a user signs into FxA from selecting a
      Mozilla VPN plan on Mozilla VPN's product site, then the value of this metric could
      be 'vpn-product-page'.  The value has a max length of 128 characters with the
      alphanumeric characters, _ (underscore), forward slash (/), . (period), %
      (percentage sign), and - (hyphen) in the allowed set of characters.  The
      special value of 'page+referral+-+not+part+of+a+campaign' is also allowed.
    type: string
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

  content:
    description: |
      The content on which the user acted.  For example, if the user clicked on the
      (previously available) "Get started here" link in "Looking for Firefox Sync? Get
      started here", then the value for this metric would be 'fx-sync-get-started'.
      The value has a max length of 128 characters with the alphanumeric characters,
      _ (underscore), forward slash (/), . (period), % (percentage sign), and - (hyphen)
      in the allowed set of characters.
    type: string
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

  medium:
    description: |
      The "medium" on which the user acted.  For example, if the user clicked on a
      link in an email, then the value of this metric would be 'email'.  The value
      has a max length of 128 characters with the alphanumeric characters, _
      (underscore), forward slash (/), . (period), % (percentage sign), and -
      (hyphen) in the allowed set of characters.
    type: string
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

  source:
    description: |
      The source from where the user started.  For example, if the user clicked on a
      link on the Mozilla accounts web site, this value could be 'fx-website'.  The
      value has a max length of 128 characters with the alphanumeric characters, _
      (underscore), forward slash (/), . (period), % (percentage sign), and -
      (hyphen) in the allowed set of characters.
    type: string
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

  term:
    description: |
      This metric is similar to the `utm.source`; it is used in the Firefox
      browser.  For example, if the user started from about:welcome, then the value
      could be 'aboutwelcome-default-screen'.  The value has a max length of 128
      characters with the alphanumeric characters, _ (underscore), forward slash (/),
      . (period), % (percentage sign), and - (hyphen) in the allowed set of
      characters.
    type: string
    lifetime: application
    send_in_pings:
      - events
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction

pay_setup:
  view:
    description: Checkout view event
    type: event
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  engage:
    description: Checkout engage event
    type: event
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  submit:
    description: Checkout submit event
    type: event
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  success:
    description: Checkout engage event
    type: event
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
  fail:
    description: Checkout fail event
    type: event
    notification_emails:
      - subplat-team@mozilla.com
    bugs:
      - https://mozilla-hub.atlassian.net/browse/FXA-7531
    data_reviews:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=tbd
    expires: never
    data_sensitivity:
      - interaction
